{% extends 'ADMIN/base_admin.html' %}
{% block title %}Modify Facility{% endblock %}

{% block body %}
<div class="container animate-fade" style="max-width: 800px; margin-top: 60px;">
    <div style="margin-bottom: 45px; display: flex; align-items: center; justify-content: space-between;">
        <div>
            <h2 style="font-size: 36px; font-weight: 800; margin-bottom: 8px; letter-spacing: -1px;">Modify Facility
            </h2>
            <p style="color: var(--text-secondary);">Update operational parameters for <strong>{{ center.name }}</strong>.</p>
        </div>
        <a href="/admin_manage_care_centers/" class="btn btn-outline" style="padding: 12px 24px;">
            <i class="fas fa-arrow-left"></i> Registry
        </a>
    </div>

    <form method="POST" enctype="multipart/form-data" class="card"
        style="padding: 50px; border-radius: 32px; position: relative; overflow: hidden;">
        <div
            style="position: absolute; top: -50px; right: -50px; width: 150px; height: 150px; background: #3498db; opacity: 0.03; border-radius: 50%; filter: blur(40px);">
        </div>

        {% csrf_token %}

        <div style="margin-bottom: 35px;">
            <label
                style="display: block; margin-bottom: 12px; color: var(--text-secondary); font-weight: 600; font-size: 13px; letter-spacing: 0.5px;">INSTITUTIONAL
                IDENTITY</label>
            <input type="text" name="name" value="{{ center.name }}" required
                style="width: 100%; padding: 18px; background: rgba(0,0,0,0.2); border: 1px solid var(--border); border-radius: 16px; color: #fff; font-size: 15px;">
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 35px;">
            <div>
                <label
                    style="display: block; margin-bottom: 12px; color: var(--text-secondary); font-weight: 600; font-size: 13px; letter-spacing: 0.5px;">CONTACT
                    CHANNEL (EMAIL)</label>
                <input type="email" name="email" value="{{ center.email }}" required
                    style="width: 100%; padding: 18px; background: rgba(0,0,0,0.2); border: 1px solid var(--border); border-radius: 16px; color: #fff; font-size: 15px;">
            </div>
            <div>
                <label
                    style="display: block; margin-bottom: 12px; color: var(--text-secondary); font-weight: 600; font-size: 13px; letter-spacing: 0.5px;">TELEMETRY
                    (PHONE)</label>
                <input type="tel" name="phone" value="{{ center.phone }}" required pattern="[0-9]{10}"
                    placeholder="10-digit number"
                    style="width: 100%; padding: 18px; background: rgba(0,0,0,0.2); border: 1px solid var(--border); border-radius: 16px; color: #fff; font-size: 15px;">
            </div>
        </div>

        <div style="margin-bottom: 35px;">
            <label
                style="display: block; margin-bottom: 12px; color: var(--text-secondary); font-weight: 600; font-size: 13px; letter-spacing: 0.5px;">REGULATORY
                CREDENTIALS (LICENSE)</label>
            <input type="text" name="license" value="{{ center.license_number }}" required
                style="width: 100%; padding: 18px; background: rgba(0,0,0,0.2); border: 1px solid var(--border); border-radius: 16px; color: #fff; font-size: 15px;">
        </div>

        <div style="margin-bottom: 35px;">
            <label
                style="display: block; margin-bottom: 12px; color: var(--text-secondary); font-weight: 600; font-size: 13px; letter-spacing: 0.5px;">GEOSPATIAL
                COORDINATES</label>
            <textarea name="address" required
                style="width: 100%; padding: 18px; background: rgba(0,0,0,0.2); border: 1px solid var(--border); border-radius: 16px; color: #fff; font-size: 15px; height: 120px; resize: none;">{{ center.address }}</textarea>
        </div>

        <div style="margin-bottom: 45px;">
            <label
                style="display: block; margin-bottom: 12px; color: var(--text-secondary); font-weight: 600; font-size: 13px; letter-spacing: 0.5px;">FACILITY
                BRANDING</label>
            {% if center.image %}
            <div
                style="margin-bottom: 20px; display: flex; align-items: center; gap: 15px; background: rgba(255,255,255,0.03); padding: 15px; border-radius: 16px; border: 1px solid var(--border);">
                <img src="{{ center.image.url }}"
                    style="height: 60px; width: 60px; object-fit: cover; border-radius: 12px; border: 1px solid var(--border);">
                <div>
                    <p style="margin: 0; font-size: 13px; font-weight: 600; color: #fff;">Current Asset</p>
                    <small style="color: var(--text-secondary); font-size: 11px;">Active logo/profile image</small>
                </div>
            </div>
            {% endif %}

            <div style="position: relative; border: 2px dashed var(--border); border-radius: 20px; padding: 30px; text-align: center; transition: 0.3s;"
                id="drop-zone">
                <input type="file" name="image" id="file-input"
                    style="position: absolute; inset: 0; opacity: 0; cursor: pointer;">
                <div style="color: var(--text-secondary);">
                    <i class="fas fa-cloud-upload-alt fa-2x" style="margin-bottom: 10px;"></i>
                    <p id="file-label" style="margin: 0; font-size: 14px;">Select to replace facility branding</p>
                </div>
            </div>
        </div>

        <div style="display: flex; gap: 20px; align-items: center;">
            <a href="/admin_manage_care_centers/" class="btn btn-outline"
                style="flex: 1; padding: 18px; border-radius: 16px; font-weight: 600;">
                Discard
            </a>
            <button type="submit" class="btn btn-primary"
                style="flex: 2; padding: 18px; border-radius: 16px; font-weight: 800; font-size: 16px; letter-spacing: 0.5px; box-shadow: 0 15px 35px rgba(52, 152, 219, 0.2); background: linear-gradient(135deg, #3498db 0%, #2980b9 100%); border: none;">
                SAVE PROTOCOLS
            </button>
        </div>
    </form>
</div>

<script>
    const fileInput = document.getElementById('file-input');
    const fileLabel = document.getElementById('file-label');
    const dropZone = document.getElementById('drop-zone');

    fileInput.addEventListener('change', (e) => {
        if (e.target.files.length > 0) {
            fileLabel.innerText = e.target.files[0].name;
            dropZone.style.borderColor = '#3498db';
            dropZone.style.background = 'rgba(52, 152, 219, 0.05)';
        }
    });
</script>

<style>
    input:focus,
    textarea:focus {
        border-color: #3498db !important;
        outline: none;
        box-shadow: 0 0 0 4px rgba(52, 152, 219, 0.1);
    }
</style>
{% endblock %}
